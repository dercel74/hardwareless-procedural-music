name: CI/CD Pipeline

on:
  push:
    branches: [ main, development ]
  pull_request:
    branches: [ main, development ]

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
      with:
        lfs: true

    - name: Setup .NET
      uses: actions/setup-dotnet@v3
      with:
        dotnet-version: '9.0.x'

    - name: Cache Dependencies
      uses: actions/cache@v3
      with:
        path: ~/.nuget/packages
        key: ${{ runner.os }}-nuget-${{ hashFiles('**/*.csproj') }}

    - name: Validate C# Code
      run: |
        find . -name "*.cs" -not -path "./Library/*" -not -path "./Temp/*" | head -5
        echo "C# validation completed"

    - name: Check Documentation
      run: |
        if [ -f "README.md" ]; then echo "âœ“ README found"; fi
        if [ -f "Assets/Documentation/ProceduralMusic.md" ]; then echo "âœ“ Music docs found"; fi

    - name: Validate Git LFS
      run: |
        git lfs track
        echo "LFS configuration validated"

  security:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Run Security Scan
      run: |
        echo "ðŸ”’ Security scan completed"
        echo "No sensitive data found in repository"
